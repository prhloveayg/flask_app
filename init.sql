-- init.sql

-- Use the IoT database
USE IoT;

-- Create 'device' table
DROP TABLE IF EXISTS `device`;
CREATE TABLE `device` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `category` VARCHAR(10) DEFAULT NULL,
  `add_date` DATETIME DEFAULT NULL,
  `name` VARCHAR(20) DEFAULT NULL,
  `price` DOUBLE DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`name`)
);

-- Create 'data' table
DROP TABLE IF EXISTS `data`;
CREATE TABLE `data` (
  `id` INT DEFAULT NULL,
  `timestamp` DATETIME DEFAULT NULL,
  `lng` DOUBLE DEFAULT NULL,
  `lat` DOUBLE DEFAULT NULL,
  `info` VARCHAR(100) DEFAULT NULL,
  `value` INT DEFAULT NULL,
  `alert` INT DEFAULT NULL,
  KEY `id` (`id`),
  CONSTRAINT `data_ibfk_1` FOREIGN KEY (`id`) REFERENCES `device` (`id`) ON DELETE CASCADE
);

-- Create 'users' table
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `name` VARCHAR(30) NOT NULL,
  `email` VARCHAR(30) NOT NULL,
  `password` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`name`,`password`)
);

INSERT INTO `device` VALUES (1,'sensor','2023-9-29 18:43:52','humidity',11.11),(2,'sensor','2023-10-15 00:00:00','temperature',3.33),(3,'sensor','2023-11-18 00:00:00','orientation',22.12),(4,'sensor','2023-11-06 00:00:00','GPS',32.1),(5,'sensor','2023-12-25 00:00:00','light',2.56);

INSERT INTO `data` VALUES (2,'2023-12-04 10:03:24',120.14742970466614,30.135996651649478,'Device Data 2023/12/04 10:03:23',10,0),(3,'2023-12-04 10:03:25',119.92626841068268,30.172481679916384,'Device Data 2023/12/04 10:03:24',12,0),(1,'2023-12-04 10:04:44',120.15494378805161,30.253632616996768,'Device Data 2023/12/04 10:04:43',33,0),(2,'2023-12-04 10:04:45',120.07712857723237,30.411340665817264,'Device Data 2023/12/04 10:04:44',44,0),(1,'2023-12-04 10:04:46',120.43652441501618,30.148376750946046,'Device Data 2023/12/04 10:04:45',39,0),(3,'2023-12-04 10:04:55',119.95960876941682,30.366757464408877,'Device Data 2023/12/04 10:04:54',52,0),(3,'2023-12-04 10:05:08',120.31001888513566,30.442453408241274,'Device Data 2023/12/04 10:05:07',88,1),(4,'2023-12-04 10:05:08',120.2024638056755,30.439211297035218,'Device Data 2023/12/04 10:05:07',46,0),(4,'2023-12-04 10:05:09',120.31746845245362,30.457702589035037,'Device Data 2023/12/04 10:05:08',49,0),(1,'2023-12-04 10:05:10',120.41901330947877,30.409098577499392,'Device Data 2023/12/04 10:05:09',98,1),(3,'2023-12-05 15:47:47',120.16084386110306,30.217276549339296,'Device Data 2023/12/05 15:47:46',43,0),(2,'2023-12-05 15:47:50',119.951888692379,30.11975042819977,'Device Data 2023/12/05 15:47:49',60,0),(2,'2023-12-05 15:47:50',120.19384744167328,30.404707765579225,'Device Data 2023/12/05 15:47:49',77,0),(3,'2023-12-05 15:47:52',120.01381095647812,30.173424005508423,'Device Data 2023/12/05 15:47:51',65,0),(5,'2023-12-05 15:47:53',120.18953037261963,30.37131817340851,'Device Data 2023/12/05 15:47:52',53,0),(4,'2023-12-05 15:47:54',120.47272025346757,30.246370005607606,'Device Data 2023/12/05 15:47:53',45,0),(2,'2023-12-05 15:47:55',120.32868795394899,30.11705780029297,'Device Data 2023/12/05 15:47:54',28,0),(3,'2023-12-05 15:48:05',120.18961030244827,30.162771940231323,'Device Data 2023/12/05 15:48:04',39,0),(3,'2023-12-05 15:48:07',119.9846859574318,30.414865088462832,'Device Data 2023/12/05 15:48:06',45,0),(4,'2023-12-05 15:48:08',120.02200231552125,30.38140506744385,'Device Data 2023/12/05 15:48:07',17,0),(1,'2023-12-05 15:48:08',120.4305100440979,30.238146829605103,'Device Data 2023/12/05 15:48:07',81,1),(4,'2023-12-20 15:21:24',120.37361903190613,30.36707215309143,'Device Data 2023/12/20 15:21:23',90,1),(3,'2023-12-20 15:21:26',120.37222954034806,30.193476700782778,'Device Data 2023/12/20 15:21:25',90,1),(5,'2023-12-20 15:21:27',120.06930457353593,30.368971180915835,'Device Data 2023/12/20 15:21:26',71,0),(4,'2023-12-20 15:21:27',120.28977568149567,30.203835701942445,'Device Data 2023/12/20 15:21:26',2,0),(2,'2023-12-20 15:21:29',120.32932935953141,30.481413984298708,'Device Data 2023/12/20 15:21:28',29,0),(1,'2023-12-20 15:21:29',120.16683351993561,30.11627314090729,'Device Data 2023/12/20 15:21:28',86,1),(5,'2023-12-20 15:21:30',120.1010193347931,30.16371214389801,'Device Data 2023/12/20 15:21:29',49,0),(5,'2023-12-20 15:21:31',120.23728667497636,30.22344608306885,'Device Data 2023/12/20 15:21:30',87,1),(3,'2023-12-20 15:21:32',120.349393928051,30.105396389961243,'Device Data 2023/12/20 15:21:31',51,0),(4,'2023-12-20 15:21:32',120.08221708536149,30.220689201354983,'Device Data 2023/12/20 15:21:31',62,0),(5,'2023-12-20 15:21:33',120.14991943836213,30.370949149131775,'Device Data 2023/12/20 15:21:32',81,1),(1,'2023-12-20 15:28:30',120.21846854686737,30.27621841430664,'Device Data 2023/12/20 15:28:29',31,0),(3,'2023-12-20 15:28:33',120.47004616260529,30.47594270706177,'Device Data 2023/12/20 15:28:32',89,1),(5,'2023-12-20 15:28:34',119.90238355398179,30.132145524024963,'Device Data 2023/12/20 15:28:33',19,0);

INSERT INTO `users` VALUES ('houpeiran','123@qq.com','password');